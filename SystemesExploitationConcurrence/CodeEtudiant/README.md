# Projet client-serveur SEPC

Le projet client-serveur doit comporter 2 repertoires :

- le serveur dont le code source vous est donné (Fichier compressé avec zip serveur)
- le client que vous devez écrire (Fichier compresse avec zip client)

---

## Le serveur

Tous les fichiers source sont donnés. La commande make compile toute la partie serveur.
(l'option -D _SVID_SOURCE) dépend de la version de Linux
Vous obtenez un executable SV
L'appel au serveur se fait en précisant la durée en secondes SV <n>.
Ex : SV 50
lance le serveur pendant 50 secondes

Le répertoire Test permet de voir le fonctionnement du client tel qu'il est attendu.

## Le client

Tous les fichiers source sont donnés. La commande make compile toute la partie serveur.
(l'option -D _SVID_SOURCE) dépend de la version de Linux
Vous obtenez un executable CL
On appelle CL en lui donnant le nombre de secondes CL <n> (25s par defaut).

! ATTENTION : l'appel au serveur et au client doit se faire dans 2 terminaux différents.

---

### **Étapes pour cloner, compiler et exécuter un projet avec GitHub et Make**

Voici les étapes détaillées pour récupérer, compiler et exécuter un projet C hébergé sur GitHub en utilisant `git` et un fichier `Makefile`.

---

### **Exemple complet**
```bash
# Cloner le projet
git clone https://gitlab.com/ggoulartm/projet-client-serveur.git
cd projet-client-serveur

make 

# Lancer le serveur
./bin/SL 1000 //pour lancer le serveur pendant 1000 secondes

# Lancer le client
./bin/CV 500 //pour lancer le client pendant 1000 seconds
```

---

## TroubleShooting

### **1. Cloner le projet depuis GitHub**

1. **Installer Git (si ce n'est pas déjà fait)** :
   - Sous Linux :  
     ```bash
     sudo apt update
     sudo apt install git
     ```
   - Sous macOS :  
     Git est inclus dans Xcode Command Line Tools. Vous pouvez installer ces outils avec :
     ```bash
     xcode-select --install
     ```
   - Sous Windows :  
     Installez Git depuis [git-scm.com](https://git-scm.com/).

2. **Cloner le dépôt** :
   - Ouvrez un terminal et exécutez la commande suivante :

     ```bash
     git clone https://gitlab.com/ggoulartm/projet-client-serveur.git
     ```

3. **Naviguer dans le répertoire du projet** :
   ```bash
   cd projet-client-serveur
   ```

---

### **2. Compiler le projet avec Make**

1. **Vérifiez qu'un fichier `Makefile` est présent dans le dépôt** :
   - Un fichier `Makefile` contient les instructions pour automatiser la compilation et la gestion des dépendances.

2. **Installer les outils nécessaires** :
   - Assurez-vous que `make` et un compilateur C (comme `gcc`) sont installés :
     - Sous Linux :  
       ```bash
       sudo apt install build-essential
       ```
     - Sous macOS :  
       Installez Xcode Command Line Tools avec :
       ```bash
       xcode-select --install
       ```
     - Sous Windows :  
       Vous pouvez utiliser un environnement comme [MinGW](http://mingw-w64.org/) ou [Cygwin](https://cygwin.com/).

3. **Compiler le projet** :
   - Tapez simplement :
     ```bash
     make
     ```
   - **Options possibles** :
     - Si le projet a plusieurs cibles (comme `client` et `serveur`), vous pouvez spécifier la cible :
       ```bash
       cd Client/
       make 
       cd ../Serveur
       make 
       ```

4. **Résoudre les erreurs de compilation** :
   - Si `make` retourne des erreurs, vérifiez que toutes les dépendances nécessaires sont installées (par exemple, des bibliothèques comme `pthread`, `ipc`, ou `shm`).

---

### **3. Exécuter le projet**

Dans le repertoire principal du projet executez les étapes suivantes:

1. **Vérifiez les exécutables générés** :
   - Une fois la compilation terminée, les fichiers exécutables sont placés dans le répertoire spécifique chez Client/Serveur (ou `bin/`).

   Dans chaque dossier cherchez CL et SV, respectivement :  
   ```bash
   ls ./Client
   CL CL_Connection.c CL_Connection.h CL.c Makefile
   ls ./Serveur
   Makefile ... SV ...
   ```

2. **Lancer les exécutables** :
   - Démarrez d'abord le serveur (si applicable) :
     ```bash
     ./Serveur/SV <nombre-de-secondes>
     ```
   - Puis lancez le client :
     ```bash
     ./Client/CL <nombre-de-secondes>
     ```

3. **Ajouter des permissions d’exécution (si nécessaire)** :
   - Si l'exécutable n'a pas les permissions adéquates :
     ```bash
     chmod +x ./Client/CL
     chmod +x ./Serveur/SV
     ```

---

### **4. Mettre à jour le projet**
Si des mises à jour ont été apportées au dépôt Git, vous pouvez les récupérer avec les commandes suivantes :
```bash
git pull
make clean  # Nettoyer les fichiers générés
make        # Recompiler avec les mises à jour
```


